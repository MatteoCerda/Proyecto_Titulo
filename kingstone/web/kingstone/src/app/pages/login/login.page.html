<ion-content class="login">
  <div class="login-wrap">
    <!-- Izquierda: logo/branding -->
    <div class="login-left">
      <ion-img src="assets/kingston-estampados.png" alt="logo" class="logo"></ion-img>
    </div>

    <!-- Derecha: formulario -->
    <div class="login-right box">
      <h1 class="title">{{ title }}</h1>

      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">
        <ion-item lines="none">
          <ion-label position="stacked">Correo electronico</ion-label>
          <ion-input type="email" formControlName="email"></ion-input>
        </ion-item>

        <ion-item lines="none">
          <ion-label position="stacked">Contrasena</ion-label>
          <ion-input
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            placeholder="Ingresa tu contrasena">
          </ion-input>
          <ion-button
            slot="end"
            fill="clear"
            class="eye-btn"
            (click)="showPassword = !showPassword"
            aria-label="Mostrar u ocultar contrasena">
            <ng-container *ngIf="!showPassword; else eyeOffSvg">
              <svg class="eye-svg" width="22" height="22" viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                <path fill="none" stroke="currentColor" stroke-width="2" d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7-10-7-10-7z"></path>
                <circle cx="12" cy="12" r="3" fill="currentColor"></circle>
              </svg>
            </ng-container>
            <ng-template #eyeOffSvg>
              <svg class="eye-svg" width="22" height="22" viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                <path fill="none" stroke="currentColor" stroke-width="2" d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7-10-7-10-7z"></path>
                <line x1="3" y1="3" x2="21" y2="21" stroke="currentColor" stroke-width="2"></line>
              </svg>
            </ng-template>
          </ion-button>
        </ion-item>

        <div class="recover" *ngIf="showForgot">
          <a routerLink="/recuperar" class="recover-link">Olvidaste tu contrasena?</a>
        </div>

        <ion-button
          expand="block"
          class="ion-margin-top"
          [disabled]="form.invalid || loading()"
          type="submit">
          Iniciar sesion
        </ion-button>
        <ion-button
          *ngIf="showRegister"
          routerLink="/registro"
          expand="block"
          fill="outline">
          Registrarse
        </ion-button>
      </form>

      <div class="divider" *ngIf="showGuest">o</div>

      <ion-button
        *ngIf="showGuest"
        fill="outline"
        expand="block"
        (click)="entrarComoInvitado()">
        Entrar sin iniciar sesion
      </ion-button>
    </div>
  </div>
</ion-content>
