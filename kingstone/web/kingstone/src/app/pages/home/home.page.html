<ion-content class="home" fullscreen>
  <section class="hero">
    <div class="hero-media">
      <swiper-container
        class="hero-slides"
        [slidesPerView]="heroSlides.slidesPerView"
        [loop]="heroSlides.loop"
        [speed]="heroSlides.speed"
        [autoplay]="heroSlides.autoplay"
        [pagination]="heroSlides.pagination"
      >
        <swiper-slide *ngFor="let slide of heroImages">
          <img [src]="slide.src" [alt]="slide.alt" loading="lazy" />
        </swiper-slide>
      </swiper-container>
    </div>
    <div class="hero-info">
      <h1>Kingston Estampados</h1>
      <p>
        &iexcl;Todos tus dise&ntilde;os aqu&iacute;! Impresi&oacute;n personalizada, vinilos textiles y soluciones completas para tus proyectos.
      </p>
      <ul class="hero-list">
        <li>Comprinter y vinilos textiles premium</li>
        <li>Ploteo, serigraf&iacute;a y estampados express</li>
        <li>Adhesivos, vinilo decorativo y papel de sublimaci&oacute;n</li>
        <li>Atenci&oacute;n presencial y env&iacute;os a todo Chile</li>
      </ul>
      <div class="cta">
        <a routerLink="/productos">
          <ion-button color="light">Ver cat&aacute;logo</ion-button>
        </a>
        <a routerLink="/crea-tu-diseno">
          <ion-button>Crear cotizaci&oacute;n</ion-button>
        </a>
      </div>
    </div>
  </section>

  <section class="home-offers" *ngIf="cargando() || error() || ofertas().length">
    <div class="offers-header">
      <h2>Ofertas destacadas</h2>
      <button class="refresh" type="button" (click)="cargarOfertas()">Actualizar</button>
    </div>
    <p *ngIf="error()" class="offers-error">{{ error() }}</p>
    <div *ngIf="cargando()" class="offers-loading">Cargando ofertas...</div>
    <div class="offers-grid" *ngIf="!cargando() && ofertas().length">
      <article class="offer-card" *ngFor="let oferta of ofertas()">
        <div class="offer-media" *ngIf="oferta.imageUrl">
          <img [src]="oferta.imageUrl" [alt]="oferta.titulo">
        </div>
        <div class="offer-body">
          <h3>{{ oferta.titulo }}</h3>
          <p *ngIf="oferta.descripcion">{{ oferta.descripcion }}</p>
          <p class="offer-product" *ngIf="oferta.inventario">{{ oferta.inventario.code }} &mdash; {{ oferta.inventario.name }}</p>
          <div class="offer-pricing" *ngIf="oferta.offerPrice !== null && oferta.offerPrice !== undefined">
            <div class="price-row">
              <span class="before" *ngIf="oferta.basePrice">{{ oferta.basePrice | currency:'CLP':'symbol-narrow':'1.0-0' }}</span>
              <strong class="now">{{ oferta.offerPrice | currency:'CLP':'symbol-narrow':'1.0-0' }}</strong>
              <span class="discount" *ngIf="oferta.discountPercent !== null && oferta.discountPercent !== undefined">
                -{{ oferta.discountPercent }}%
              </span>
            </div>
            <p class="savings" *ngIf="oferta.discountAmount">{{ 'Ahorra ' + (oferta.discountAmount | currency:'CLP':'symbol-narrow':'1.0-0') }}</p>
          </div>
          <a *ngIf="oferta.link" class="offer-link" [href]="oferta.link" target="_blank" rel="noopener">
            Ver m&aacute;s
          </a>
        </div>
      </article>
    </div>
    <p *ngIf="!cargando() && !error() && !ofertas().length" class="offers-empty">No hay ofertas activas por ahora.</p>
  </section>

  <section class="home-catalog">
    <h2>Encuentra lo que necesitas</h2>
    <p>Consulta nuestro cat&aacute;logo con precios web y guarda tus cotizaciones para retomarlas cuando quieras.</p>
    <div class="quick-links">
      <a [routerLink]="['/productos']" [queryParams]="{ search: 'Textil' }">Vinilos textiles</a>
      <a [routerLink]="['/productos']" [queryParams]="{ search: 'Decorativo' }">Vinilo decorativo</a>
      <a [routerLink]="['/productos']" [queryParams]="{ search: 'Sublimacion' }">Sublimaci&oacute;n y DTF</a>
      <a routerLink="/carrito">Revisa tu carrito</a>
    </div>
  </section>
</ion-content>

